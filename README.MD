## Описание проекта

Bookcase - мой пет проект, цель которого отточить навыки разработки на Go.
Это веб приложение электорнный справочник по моим книгам и книгам других пользователей.
Возможно, дальше буду развивать его в сторону сервиса обмена книгами.

### Список страниц
- Регистрация/авторизация:  http://localhost:1991/auth
- Список своих книг (главная страница): http://localhost:1991/
- Список своих книг и книг других пользователей: http://localhost:1991/total

### Функционал
- Можно (нужно) зарегистрироваться и залогиниться в приложении. 
Неавторизованных пользователей перенаправляют в /auth
- Можно разлогиниться. Будет перенаправление в /auth
- Можно добавить книгу, заполнив форму с полями "Автор", "Название", "Издательство", "Год издания".
Поле "Автор" заполняется из списка на основе базы авторов.
- Можно добавить автора, если его нет в БД. Автор не из БД не закрепляется за книгой. Добавить такую книгу не получится.
- Можно посмотреть список собственных книг, отсортировать его по каждому столбцу. Есть пагинация с шагом в 10 строк.
- Можно посмотреть общий список книг (в разработке)
- Можно посмотреть логи пользователей, перейдя по ссылке под таблицей.
(Не закончено, есть только лог добавления авторов)


## Архитектура
Проект состоит из двух микросервисов: основной и хранящий логи.
Каждый микросервис имеет 3-уровневую архитектуру с абстракциями хэндлера, сервиса и хранилища.
У каждого микросервиса своя БД.
Основной микросервис передаёт лог действия пользователя сервису логов через брокер очередей.

## Cтек технологий
### backend:
- Go (gin, sarama, pq)
- Postgres (по умолчанию)
- Sqlite (опционально, можно переключить)
- Kafka
### frontend:
- html 
- css
- js (jquery)
- bootstrap
### окружение:
Docker, Docker Compose

Всего 7 контейнеров
- Основное приложение
- Приложение с логами
- БД основного приложения
- БД приложения с логами
- pgAdmin
- zookeeper (для кафки)
- kafka

## Запуск приложения

- В терминале запускаем команду git clone git@github.com:LineyKin/bookcase.git
- В корне проекта создаём .env
- Заполняем .env как .env.example (по каждому полю есть коммент)
- В терминале из корня проекта запускаем docker compose up
- Основное приложение доступно по ссылке http://localhost:1991/ . С логами - http://localhost:1992/

### pgAdmin
Чтобы посмотреть БД напрямую, можно перейти по ссылке http://localhost:5050
- Логин admin@admin.com
- Пароль root

Далее создаём подключение к БД
- В левом верхнем углу жмём правой кнопокой по Servers -> Register -> Сервер
- Даём любое понятное вам имя
- В "Соединении" пишем адрес сервера db1, порт 5432, остальное всё как в .env

Аналогично можно сделать для второй базы, имя сервера у неё db2
